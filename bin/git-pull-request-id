#!/usr/bin/env python

# Script to get pull-request id for current branch
# Requires `github_token` command (not provided)

from miscutils import *
import json

def main():
    query = { 'state': 'all', 'head': repo_branch_head() }
    data = pulls(repo_path(), query)
    pr = {}
    if len(data):
        pr = data[0]
    print pr.get('number') or ''

if __name__ == "__main__":
    try:
        main()
    except Exception as e:
        print e
